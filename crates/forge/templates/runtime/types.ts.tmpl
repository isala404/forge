// Auto-generated by FORGE v{{version}} - DO NOT EDIT
// Regenerate with: forge generate

// FORGE error type returned from the server
export interface ForgeError {
  code: string;
  message: string;
  details?: Record<string, unknown>;
}

// Result of a query operation
export interface QueryResult<T> {
  loading: boolean;
  data: T | null;
  error: ForgeError | null;
}

// Result of a subscription operation
export interface SubscriptionResult<T> extends QueryResult<T> {
  stale: boolean;
}

// WebSocket connection state
export type ConnectionState =
  | "connecting"
  | "connected"
  | "reconnecting"
  | "disconnected";

// Auth state for the current user
export interface AuthState {
  user: unknown | null;
  token: string | null;
  loading: boolean;
}

// Function type definitions for type-safe RPC calls
export interface QueryFn<TArgs, TResult> {
  (client: ForgeClientInterface, args: TArgs): Promise<TResult>;
  functionName: string;
  functionType: "query";
}

export interface MutationFn<TArgs, TResult> {
  (client: ForgeClientInterface, args: TArgs): Promise<TResult>;
  functionName: string;
  functionType: "mutation";
}

export interface ActionFn<TArgs, TResult> {
  (client: ForgeClientInterface, args: TArgs): Promise<TResult>;
  functionName: string;
  functionType: "action";
}

// FORGE client interface for making RPC calls
export interface ForgeClientInterface {
  call<T>(functionName: string, args: unknown): Promise<T>;
  subscribe<T>(
    functionName: string,
    args: unknown,
    callback: (data: T) => void,
  ): () => void;
  getConnectionState(): ConnectionState;
  connect(): Promise<void>;
  disconnect(): void;
}

// Job status enum
export type JobStatus =
  | "pending"
  | "claimed"
  | "running"
  | "completed"
  | "retry"
  | "failed"
  | "dead_letter"
  | "not_found";

// Job progress information
export interface JobProgress {
  job_id: string;
  status: JobStatus;
  progress_percent: number | null;
  progress_message: string | null;
  output: unknown | null;
  error: string | null;
  // Retry/heartbeat info (if available from backend)
  attempts?: number;
  max_attempts?: number;
  last_heartbeat?: string;
}

// Workflow status enum
export type WorkflowStatus =
  | "created"
  | "running"
  | "waiting"
  | "completed"
  | "compensating"
  | "compensated"
  | "failed"
  | "not_found";

// Workflow step status enum
export type WorkflowStepStatus =
  | "pending"
  | "running"
  | "completed"
  | "failed"
  | "compensated"
  | "skipped";

// Workflow step information
export interface WorkflowStep {
  name: string;
  status: WorkflowStepStatus;
  started_at: string | null;
  completed_at: string | null;
  error: string | null;
}

// Workflow progress information
export interface WorkflowProgress {
  workflow_id: string;
  status: WorkflowStatus;
  current_step: string | null;
  steps: WorkflowStep[];
  output: unknown | null;
  error: string | null;
}
